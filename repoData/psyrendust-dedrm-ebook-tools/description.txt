DeDRM_plugin.zip
================

This calibre plugin replaces all previous DRM removal plugins. When you install this plugin, the older separate plugins should be removed.

This plugin will remove the DRM from Amazon Kindle ebooks (Mobi, KF8, Topaz and Print Replica), Mobipocket, Adobe Digital Edition ePubs (including Sony and Kobo ePubs), Barnes and Noble ePubs, Adobe Digital Edition PDFs, and Fictionwise eReader ebooks.


Installation
------------
Do NOT select "Get plugins to enhance calibre" as this is reserved for 'official' calibre plugins, instead select "Change calibre behavior" to go to Calibre's Preferences page.  Under "Advanced" click on the Plugins button. Use the "Load plugin from file" button to select the plugin's zip file (DeDRM_plugin.zip) and click the "Add" button. Click "Yes" in the the "Are you sure?" dialog. Click OK in the "Success" dialog.


Customization
-------------
The keys for ebooks downloaded using Kindle for Mac/PC and Adobe Digital Editions are automatically generated and saved when needed. If all your DRMed ebooks can be opened and read in Kindle for Mac/PC or Adobe Digital Editions on the same computer on which you are running calibre, you do not need to do any configuration of this plugin. (On Linux, Kindle for PC and Adobe Digital Editions along with Python and PyCrypto need to be installed under Wine for this to work, see the Linux section at the end.)

If you have books from other sources (e.g. from an eInk Kindle), highlight the plugin (DeDRM under the "File type plugins" category) and click the "Customize Plugin" button.

The buttons in the configuration dialog will open individual configuration dialogs that will allow you to enter the needed information, depending on the type and source of your DRMed eBooks. Additional help on the information required is available in each of the the dialogs.

If you have used previous versions of the various DeDRM plugins on this machine, you may find that some of the configuration dialogs already contain the information you entered through those previous plugins.

When you have finished entering your configuration information, you must click the OK button to save it. If you click the Cancel button, all your changes in all the configuration dialogs will be lost.


Troubleshooting
---------------
If you find that it's not working for you (imported ebooks still have DRM), you can save a lot of time and trouble by deleting the DRMed ebook from calibre and then trying to add the ebook to calibre in debug mode with the command line tools. This will print out a lot of helpful debugging info that can be copied into any online help requests.

On Macintosh only you must first run calibre, open Preferences, open Miscellaneous, and click on the “Install command line tools” button. (On Windows and Linux the command line tools are installed automatically.)

On Windows, open a terminal/command window. (Start/Run… and then type 'cmd' (without the 's) as the program to run).
On Macintosh, open the Terminal application (in your Utilities folder).
On Linux open a command window. Hopefully all Linux users know how to do this.

You should now have a text-based command-line window open.

Type in "calibre-debug -g" (without the ") and press the return/enter key. Calibre will launch and run as normal, but with debugging information output to the terminal window.

Import the drmed eBook into calibre in any of the the normal ways. (I usually drag&drop onto the calibre window.)

More debug information will be written to the terminal window.

Copy the output from the terminal window.
On Windows, you must use the window menu (little icon at left of window bar) to select all the text and then to copy it.
On Macintosh and Linux, just use the normal text select and copy commands.

Paste the information into a comment at my blog, http://apprenticealf.wordpress.com/ describing your problem.


Credits
-------
The mobidedrm and erdr2pml scripts were created by The Dark Reverser
The ignobleepub, ignoblekeygen, ineptepub and adobe key scripts were created by i♥cabbages
The k4mobidedrm script and supporting scripts were written by some_updates with help from DiapDealer and Apprentice Alf, based on code by Bart Simpson (aka Skindle), CMBDTC and clarknova
The alfcrypto library was created by some_updates
The ePub encryption detection script was adapted by Apprentice Alf from a script by Paul Durrant
The DeDRM all-in-one AppleScript was created by Apprentice Alf
The DeDRM all-in-one python script was created by some_updates and Apprentice Alf




Linux Systems Only
==================

Instructions for installing Wine, Kindle for PC, Adobe Digital Editions, Python and PyCrypto
--------------------------------------------------------------------------------------------

These instructions have been tested with Wine 1.4 on Ubuntu.

 1. First download the software you're going to to have to install.
    a. Kindle for PC from http://www.amazon.co.uk/gp/kindle/pc/
    b. Adobe Digital Editions 1.7.x from http://helpx.adobe.com/digital-editions/kb/cant-install-digital-editions.html
       (Adobe Digital Editions 2.x doesn't work with Wine.)
    c. ActivePython 2.7.X for Windows (x86) from http://www.activestate.com/activepython/downloads
    d. PyCrypto 2.1 for 32bit Windows and Python 2.7 from http://www.voidspace.org.uk/python/modules.shtml#pycrypto
       (PyCrypto downloads as a zip file. You will need to unzip it.)
 2. Install Wine for 32-bit x86.  (e.g. on Ubuntu, Open the Ubuntu Software Center, search for Wine, and install "Wine Windows Program Loader".)
 3. Run "Configure Wine", which will set up the default 'wineprefix'
 4. Run winetricks, select the default wineprefix and install component vcrun2008
 5. Run the mis-named "Uninstall Wine Software", which also allows installation of software.
 6. Install Kindle for PC. Accept all defaults and register with your Amazon Account.
 7. Install Adobe Digital Editions. Accept all defaults and register with your Adobe ID.
 8. Install ActiveState Python 2.7.x. Accept all defaults.
 9. Install PyCrypto 2.1. Accept all defaults.


Instructions for getting Kindle for PC and Adobe Digital Editions default decryption keys
-----------------------------------------------------------------------------------------

If everything has been installed in wine as above, the keys will be retrieve automatically.

If you have a more complex wine installation, you may enter the appropriate WINEPREFIX in the configuration dialogs for Kindle for PC and Adobe Digital Editions. You can also test that you have entered the WINEPREFIX correctly by trying to add the default keys to the preferences by clicking on the green plus button in the configuration dialogs.

{\rtf1\ansi\ansicpg1252\cocoartf1187\cocoasubrtf340
\cocoascreenfonts1{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fnil\fcharset0 Verdana;\f2\fnil\fcharset128 HiraKakuProN-W3;
}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\margl1440\margr1440\vieww18160\viewh16520\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\qc

\f0\b\fs24 \cf0 DeDRM ReadMe
\b0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\qj
\cf0 DeDRM is an application that packs all of the python dm-removal software into one easy to use program that remembers preferences and settings.\
It works without manual configuration with Kindle for Mac ebooks and Adobe Adept (including nook) ePub and PDF ebooks.\
\
To remove the DRM of Kindle ebooks from eInk Kindles, eReader pdb ebooks, Barnes & Noble ePubs, or Mobipocket ebooks, you must first run DeDRM application (by double-clicking it) and set some additional Preferences including:\
\
eInk Kindle (not Kindle Fire): 16 digit Serial Number\
Barnes & Noble ePub:  Name and CC number or key file  (bnepubkey.b64)\
eReader: Name and last 8 digits of CC number\
Mobipocket: 10 digit PID\
\
A final preference is the destination folder for the DRM-free copies of your ebooks that the application produces. This can be either the same folder as the original ebook, or a folder of your choice.\
\
Once these preferences have been set, you can drag and drop ebooks (or folders of ebooks) onto the DeDRM droplet to remove the DRM.\
\
This program requires Mac OS X 10.4 or above. It will not work on Mac OS X 10.3 or earlier.\
\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural

\b \cf0 Installation
\b0 \
Mac OS X 10.4 
\i only
\i0 : You 
\i must
\i0  first install Python 2.7.3 from http://python.org/. At the time of writing, the direct download link is http://www.python.org/ftp/python/2.7.3/python-2.7.3-macosx10.3.dmg.\
\
Mac OS X 10.5 and above: You do 
\i not
\i0  need to install Python.\
\
Drag the DeDRM application from from the DeDRM_Application_Macintosh folder (the location of this ReadMe) to your Applications folder, or anywhere else you find convenient.\
\
\

\b Use
\b0 \
1. To set the preferences, double-click the application and follow the instructions in the dialogs.\
2. Drag & Drop DRMed ebooks or folders of DRMed ebooks onto the application icon when it is not running.\
\
\

\b Troubleshooting\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural

\b0 \cf0 A log is created on your desktop (DeDRM.log) containing detailed information from all the scripts. If you have any problems decrypting your ebooks, copy the contents of this log in a comment at Apprentice Alf's blog.\
http://apprenticealf.wordpress.com/\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural

\b \cf0 Credits\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural

\b0 \cf0 The mobidedrm and erdr2pml scripts were created by The Dark Reverser\
The i
\f1 \CocoaLigature0 gnobleepub, ignoblekeygen, ineptepub and adobe key scripts were created by 
\f0 \CocoaLigature1 i
\f2 \CocoaLigature0 \uc0\u9829 
\f1 cabbages\
The k4mobidedrm script and supporting scripts were written by some_updates with help from DiapDealer and Apprentice Alf, based on code by Bart Simpson (aka Skindle), CMBDTC and clarknova \
The alfcrypto library was created by some_updates\
The ePub encryption detection script was adapted by Apprentice Alf from a script by Paul Durrant\
The DeDRM all-in-one AppleScript was created by Apprentice Alf\
}
1.1 get AmazonSecureStorage.xml from /data/data/com.amazon.kindle/shared_prefs/AmazonSecureStorage.xml

1.2 on android 4.0+, run `adb backup com.amazon.kindle` from PC will get backup.ab
    now android.py can convert backup.ab to AmazonSecureStorage.xml

2. run `k4mobidedrm.py -a AmazonSecureStorage.xml <infile> <outdir>'

1.1 get AmazonSecureStorage.xml from /data/data/com.amazon.kindle/shared_prefs/AmazonSecureStorage.xml

1.2 on android 4.0+, run `adb backup com.amazon.kindle` from PC will get backup.ab
    now android.py can convert backup.ab to AmazonSecureStorage.xml

2. run `k4mobidedrm.py -a AmazonSecureStorage.xml <infile> <outdir>'

DeDRM_App - DeDRM_App.pyw and DeDRM_Drop_Target.bat
===========================================================

DeDRM_App.pyw is a pure python drag and drop application that allows users to drag and drop ebooks or folders of ebooks onto the DeDRM_Drop_Target.bat to have the DRM removed.  It repackages all the "tools" python software in one easy to use program that remembers preferences and settings.

It will work without manual configuration for Kindle for PC ebooks and Adobe Digital Edition epub and pdf ebooks, when Kindle for PC and/or Adobe Digital Editions are installed on the same computer.

To remove the DRM from eInk Kindle ebooks, Barnes and Noble epubs, Mobipocket ebooks and Fictionwise eReader ebooks requires the user to double-click the DeDRM_Drop_Target.bat file and set some additional Preferences including:

eInk Kindle: 16 digit Serial Number
Barnes & Noble: key file (bnepubkey.b64) generate using ignoblekeygen.pyw
eReader Social DRM: Name:Last 8 digits of CC number
MobiPocket: 10 digit PID

Once these preferences have been set, the user can simply drag and drop ebooks onto the DeDRM_Drop_Target to remove the DRM. Note that after setting preferences it is necessary to click on "Set Prefs" button and then quit the application for the change in preferences to fully take effect.

This program requires that a 32 bit version of Python 2.x (tested with Python 2.5 through Python 2.7) and PyCrypto be installed on your computer before it will work.  See below for where to get theese programs for Windows.


Installation
------------
0. If you don't already have a correct version of Python and PyCrypto installed, follow the "Installing Python on Windows" and "Installing PyCrypto on Windows" sections below before continuing.

1. Drag the DeDRM_App folder from tools_v6.0.0/DeDRM_Application_Windows to your "My Documents" folder.

2. Open the DeDRM_App folder you've just dragged, and make a short-cut of the DeDRM_Drop_Target.bat file (right-click/Create Shortcut). Drag the shortcut file onto your Desktop.

3. To set the preferences simply double-click on the short-cut you've just created.


Credits
-------
The mobidedrm and erdr2pml scripts were created by The Dark Reverser
The ignobleepub, ignoblekeygen, ineptepub and adobe key scripts were created by i♥cabbages
The k4mobidedrm script and supporting scripts were written by some_updates with help from DiapDealer and Apprentice Alf, based on code by Bart Simpson (aka Skindle), CMBDTC and clarknova
The alfcrypto library was created by some_updates
The ePub encryption detection script was adapted by Apprentice Alf from a script by Paul Durrant
The DeDRM all-in-one AppleScript was created by Apprentice Alf
The DeDRM all-in-one python script was created by some_updates and Apprentice Alf


Installing Python on Windows
----------------------------
I strongly recommend fully installing ActiveState’s Active Python, free Community Edition for Windows (x86) 32 bits. This is a free, full version of the Python.  It comes with some important additional modules that are not included in the bare-bones version from www.python.org unless you choose to install everything.

1. Download ActivePython 2.7.X for Windows (x86) (or later 2.7 version for Windows (x86) ) from http://www.activestate.com/activepython/downloads. Do not download the ActivePython 2.7.X for Windows (64-bit, x64) verson, even if you are running 64-bit Windows.

2. When it has finished downloading, run the installer. Accept the default options.


Installing PyCrypto on Windows
------------------------------
PyCrypto is a set of encryption/decryption routines that work with Python. The sources are freely available, and compiled versions are available from several sources. You must install a version that is for 32-bit Windows and Python 2.7. I recommend the installer linked from Michael Foord’s blog.

1. Download PyCrypto 2.1 for 32bit Windows and Python 2.7 from http://www.voidspace.org.uk/python/modules.shtml#pycrypto

2. When it has finished downloading, unzip it. This will produce a file “pycrypto-2.1.0.win32-py2.7.exe”.

3. Double-click “pycrypto-2.1.0.win32-py2.7.exe” to run it. Accept the default options.




Linux Users
===========
The DeDRM_app.pyw script, although not the bat shortcut, should work under Linux. Drag & drop functionality is not available.

INTRODUCTION
============

To obtain unencrypted content from the B&N, you have to download it directly from the website. Unrooted Nook devices will not let you save your content to your PC.

If the downloaded file is encrypted, install and configure the ignoble plugin in Calibre to decrypt that.


DOWNLOAD HIDDEN FILES FROM B&N
------------------------------

Some content is not downloadable from the B&N website, notably magazines. A Greasemonkey script (details below) modifies the myNook page of the Barnes and Noble website to show a download button for normally non-downloadable content. This will work until Barnes & Noble changes their website.

Prerequisites
-------------
1) Firefox: http://www.getfirefox.com
2) Greasemokey extension: https://addons.mozilla.org/nl/firefox/addon/greasemonkey/

One time installation
---------------------
1) Install Firefox if not already done so
2) Follow the above link to GreaseMonkey and click Add to Firefox
3) Restart Firefox
4) Go to http://userscripts.org/scripts/source/152985.user.js
5) A popup should appear, stating you are about to install a GreaseMonkey user script.
6) Click on install

Use
---
1) Log in into your B&N account
2) Go to MyNook
3) An “Alternative download” should appear next to normally non-downloadable content. Note that this will not work for content such as Nook applications, and some children books.

Kindle for Android
------------------

Kindle for Android uses a different scheme to generate its books specific PIDs than Kindle for PC, Kindle for iPhone/iPad, and standalone Kindles.

Unfortunately, K4Android uses an "account secrets" file that would only be available if the device were jail-broken and even then someone would have to figure out how to decode this secret information in order to reverse the process.

Instead of trying to calculate the correct PIDs for each book from this primary data, "Me" (a commenter who posted to the ApprenticeAlf site)  came up with a wonderful idea to simply modify the Kindle 3 for Android application to store the PIDs it uses to decode each book in its "about activity" window.  This list of PIDS can then be provided to MobiDeDRM.py,  which in its latest incarnations allows a comma separated list of pids to be passed in, to successfully remove the DRM from that book.   Effectively "Me" has created an "Unswindle" for the Kindle for Android 3 application!

Obviously, to use "Me"'s approach, requires an Android Developer's Certificate (to sign the modified application) and access to and knowledge of the developer tools, but does not require anything to be jail-broken.

This is a copy the detailed instructions supplied by "Me" to the ApprenticeAlf blog in the comments.  The kindle3.patch described below is included in this folder in the tools:
 
From the ApprenticeAlf Comments:

"Me" writes:

A better solution seems to create a patched version of the Kindle apk which either logs or displays it’s PID. I created a patch to both log the pid list and show it in the Kindle application in the about activity screen. The pid list isn’t available until the DRMed book has been opened (and the list seem to differ for different books).

To create the patched kindle apk a certificate must be created (http://developer.android.com/guide/publishing/app-signing.html#cert) and the apktool must be build from source (all subprojects) as long as version 1.4.2 isn’t released (http://code.google.com/p/android-apktool/wiki/BuildApktool).

These are the steps to pull the original apk from the Android device, uninstall it, create a patched apk and install that (tested on a rooted device, but I think all steps should also work on non-rooted devices):

adb pull /data/app/com.amazon.kindle-1.apk kindle3.apk
adb uninstall com.amazon.kindle
apktool d kindle3.apk kindle3
cd kindle3
patch -p1 < ../kindle3.patch
cd ..
apktool b kindle3 kindle3_patched.apk
jarsigner -verbose -keystore kindle.keystore kindle3_patched.apk kindle
zipalign -v 4 kindle3_patched.apk kindle3_signed.apk
adb install kindle3_signed.apk

kindle3.patch (based on kindle version 3.0.1.70) is available on pastebin:
http://pastebin.com/LNpgkcpP

Have fun!

Comment by me — June 9, 2011 @ 9:01 pm | Reply

Hi me,
Wow! Great work!!!!

With your patch, you have created the equivalent of Unswindle for the Kindle for Android app and it does not even require jailbreaking!

Very nice work indeed!

Comment by some_updates — June 10, 2011 @ 4:28 am | Reply


Kindle for Android
------------------

Kindle for Android uses a different scheme to generate its books specific PIDs than Kindle for PC, Kindle for iPhone/iPad, and standalone Kindles.

Unfortunately, K4Android uses an "account secrets" file that would only be available if the device were jail-broken and even then someone would have to figure out how to decode this secret information in order to reverse the process.

Instead of trying to calculate the correct PIDs for each book from this primary data, "Me" (a commenter who posted to the ApprenticeAlf site)  came up with a wonderful idea to simply modify the Kindle 3 for Android application to store the PIDs it uses to decode each book in its "about activity" window.  This list of PIDS can then be provided to MobiDeDRM.py,  which in its latest incarnations allows a comma separated list of pids to be passed in, to successfully remove the DRM from that book.   Effectively "Me" has created an "Unswindle" for the Kindle for Android 3 application!

"Me"'s original patch was for Kindle for Android version 3.0.1.70. Now "Me II" has created a patch for Kindle for Android version 3.7.0.108 and new instructions, since some of the previous steps are no longer necessary.

From the ApprenticeAlf Comments:


"Me II" writes:

Since “Me”‘s old method for getting PIDs from Kindle for Android is outdated and no longer works with newer versions of the app, I decided I’d take a stab at bringing it up to date. It took a little fiddling to get everything working, considering how much has changed since the last patch, but I managed to do it. The process is pretty much identical to “Me”‘s original instructions, with a few minor changes.

1) You don’t need to build apktool from source. You can just grab the binaries from here for whatever OS you’re running: http://code.google.com/p/android-apktool/
2) When you sign the rebuilt APK, use the following command instead of the one in the instructions:
jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore kindle.keystore kindle3_patched.apk kindle
3) It no longer logs the PIDs, only displays them within the app.

You can get the new patch, for version 3.7.0.108, here: http://pastebin.com/6FN2cTSN

And here’s a screenshot of the updated menu: http://imgur.com/BbFVF (sorry for the Japanese, I was too lazy to change my phone’s language).

Subsequently, "s" wrote:

For others it would be useful to add the keystore generation command into the help file:
keytool -genkey -v -keystore kindle.keystore -alias kindle -keyalg RSA -keysize 2048 -validity 10000
As well as location of prc’s on android being (with sdcard):
/mnt/sdcard/Android/data/com.amazon.kindle/files/

"s" also reported success with using the patch on version 3.7.1.8, although I recommend using the 3.7.0.108 version just in case.


"Me"'s original instructions, from the ApprenticeAlf Comments:

"Me" writes:

A better solution seems to create a patched version of the Kindle apk which either logs or displays it’s PID. I created a patch to both log the pid list and show it in the Kindle application in the about activity screen. The pid list isn’t available until the DRMed book has been opened (and the list seem to differ for different books).

To create the patched kindle apk a certificate must be created (http://developer.android.com/guide/publishing/app-signing.html#cert) and the apktool must be build from source (all subprojects) as long as version 1.4.2 isn’t released (http://code.google.com/p/android-apktool/wiki/BuildApktool).

These are the steps to pull the original apk from the Android device, uninstall it, create a patched apk and install that (tested on a rooted device, but I think all steps should also work on non-rooted devices):

adb pull /data/app/com.amazon.kindle-1.apk kindle3.apk
adb uninstall com.amazon.kindle
apktool d kindle3.apk kindle3
cd kindle3
patch -p1 < ../kindle3.patch
cd ..
apktool b kindle3 kindle3_patched.apk
jarsigner -verbose -keystore kindle.keystore kindle3_patched.apk kindle
zipalign -v 4 kindle3_patched.apk kindle3_signed.apk
adb install kindle3_signed.apk

kindle3.patch (based on kindle version 3.0.1.70) is available on pastebin:
http://pastebin.com/LNpgkcpP

Have fun!

Comment by me — June 9, 2011 @ 9:01 pm | Reply

Hi me,
Wow! Great work!!!!

With your patch, you have created the equivalent of Unswindle for the Kindle for Android app and it does not even require jailbreaking!

Very nice work indeed!

Comment by some_updates — June 10, 2011 @ 4:28 am | Reply


Rocket eBooks
=============

Rocket ebooks (.rb) are no longer sold.

This is the only archive of tools for decrypting Rocket ebooks that I have been able to find. It is included here without further comment or support.

— Alf.

How-to:
1) Make sure you can read all PDF files on Scuolabook Reader.
2) Run Scuolabook DRM Remover.
3) Get your free books from the directory where you started the program.

Note:
It is recommended to use Scuolabook version 2.0.1 and refuse all updates
because the encryption algorithm may change making this tool useless.

Hex
# DRM Removal Tools for eBooks v6.0.8
This repository is a copy of the tools downloaded from [Apprentice Alf's Blog](http://www.apprenticealf.wordpress.com). I am not the author of these tools. I just wanted to keep them in a safe place. More info is at Apprentice Alf's blog post ["DRM Removal Tools for eBooks"](http://apprenticealf.wordpress.com/2012/09/10/drm-removal-tools-for-ebooks/).

# Notes
- I've changed the ReadMe_First.txt to readme.md
- Updated the readme.md with change notes and also citing the original author of the tools

## Changes in 6.0.8:
- Fixes invalid topaz files

## Changes in 6.0.7:
- Fixes wine key creation folder issue.
- Fixes DeDRM of PDFs with broken metadata.

## Changes in 6.0.6:
- Fixed up an incorrect function call. (Only relevant for Linux users using Wine)

## Changes in 6.0.5:
- Fixed a problem that resulted in key issues (thanks, Paul)

## Changes in 6.0.4:
- Fixed a problem in the plugin converting earlier preferences (thanks, enno)
- Fixed a problem in the plugin with importing pdb files (thanks, Tina Bird)
- Fixed a problem with unicode characters in path names for the Mac application (thanks, K)

## Changes in 6.0.3:
- Fixed a problem with non-ascii characters in Windows user name
- Fixed a problem early versions of Kindle for Mac
- Fix for location of DeDRMed PDF files with Macintosh DeDRM Application
- Fix in Windows DeDRM application for paths with spaces
- Restored ability for calibre plugin to call wine for Kindle for PC decryption key
- Added ability for calibre plugin to call wine for Adobe Digital Edition key
- Hopefully removed any dependency on tinter (although still used if available).
- Updated the readmes

Welcome to the tools!
=====================

This readme.md is meant to give users a quick overview of what is available and how to get started. This document is part of the Tools v6.0.5 archive from Apprentice Alf's Blog: http://apprenticealf.wordpress.com/

The is archive includes tools to remove DRM from:

 - Kindle ebooks (Mobi, Topaz, Print Replica and KF8).
 - Barnes and Noble ePubs
 - Adobe Digital Editions ePubs (including Sony and Kobo ePubs downloaded to ADE)
 - Adobe Digital Editions PDFs
 - Mobipocket ebooks
 - eReader PDB books
 - Scuolabooks (Windows only solution by Hex)

These tools do NOT work with Apple's iBooks FairPlay DRM (see end of this file.)

About the tools
---------------
These tools have been updated and maintained by Apprentice Alf, DiapDealer and some_updates. You can find the latest updates and get support at Apprentice Alf's blog: http://www.apprenticealf.wordpress.com/
If you re-post these tools, a link to the blog would be appreciated.

The original inept and ignoble scripts were by i♥cabbages
The original mobidedrm and erdr2pml scripts were by The Dark Reverser
The original topaz DRM removal script was by CMBDTC
The original topaz format conversion scripts were by some_updates, clarknova and Bart Simpson
The Scuolabooks tool is by Hex
The calibre plugin conversions were originally by DiapDealer

The DeDRM plugin is by Apprentice Alf based on plugins by DiapDealer
The DeDRM AppleScript application is by Apprentice Alf
The DeDRM python GUI is by some_updates and Apprentice Alf

Many fixes, updates and enhancements to the scripts and applicatons have been by Apprentice Alf, some_updates and DiapDealer and others.


DeDRM plugin for calibre (Mac OS X, Windows, and Linux)
-------------------------------------------------------
If you already use calibre, the quickest and easiest way, especially on Windows, to remove DRM from your ebooks is to install the DeDRM plugin from the DeDRM_calibre_plugin folder, following the instructions and configuration directions provided in the ReadMe and the help links.

Once installed and configured, you can simply add a DRM book to calibre and the DeDRMed version will be imported into the calibre database. Note that DRM removal ONLY occurs on import. If you have already imported DRM books you'll need to remove them from calibre and re-import them.

These plugins work for Windows, Mac OS X and Linux. For ebooks from Kindle 4 PC and Adobe Digital Editions, Linux users should read the section at the end the DeDRM_plugin_ReadMe.txt file.


DeDRM application for Mac OS X users: (Mac OS X 10.4 and above)
---------------------------------------------------------------
This application is a stand-alone application for Mac OS X users.

Drag the "DeDRM.app" application from the DeDRM_Macintosh_Application folder to your Desktop (or your Applications Folder, or anywhere else you find convenient). Double-click on the application to run it and you will be able to enter any configuration data needed to remove DRM from  your type of DRMed ebooks.

To use the DeDRM application simply drag ebooks and/or folders containing ebooks onto the DeDRM application and it will remove the DRM and save DRM-free versions of the books wherever you selected in the Output Folder configuration dialog.

For more detailed instructions, see the "DeDRM ReadMe.rtf" file in the DeDRM_Application_Macintosh folder, including details of the extra step that Mac OS X 10.4 users need to take to use the application.


DeDRM application for Windows users: (Windows XP through Windows 8)
------------------------------------------------------------------
***This program requires that Python and PyCrypto be properly installed.***
***See below for details on recommended versions and how to install them.***

This application is a stand-alone application for Windows users.

Drag the DeDRM_App folder that's in the DeDRM_Windows_Application folder, to your "My Documents" folder (or anywhere else you find convenient). Make a short-cut on your Desktop of the DeDRM_Drop_Target.bat file that's in the DeDRM_App folder. Double-click on the shortcut and the DeDRM application will run and you will be able to enter any configuration data needed to remove DRM from  your type of DRMed ebooks.

To use the DeDRM application simply drag ebooks or folders containing ebooks onto the DeDRM_Drop_Target.bat shortcut and it will remove the DRM and save DRM-free versions of the books wherever you selected in the Output Folder configuration dialog.

For more detailed instructions, see the DeDRM_App_ReadMe.txt file in the DeDRM_Windows_Applications folder.


Other_Tools
-----------
This folder includes other tools that may be useful for DRMed ebooks from certain sources or for Linux users. Most users won't need any of these tools.

**Key_Generation_Scripts**  
This folder contains python scripts that creates a keyfiles for Barnes and Noble ePubs, Adobe Digital Editions ePubs and Kindle for Mac/PC ebooks.

**Kindle_for_Android_Patches**  
Definitely only for the adventurous, this folder contains information on how to modify the Kindel for Android app to b able to get a PID for use with the other Kindle tools (DeDRM apps and calibre plugin).

**B&N_Download_Helper**  
A Javascript to enable a download button at the B&N website for ebooks that normally won't download to your PC. Another one only for the adventurous.

**Scuolabook_DRM**  
A windows-only application (including source code) for removing DRM from ScuolaBooks PDFs, created by "Hex" and included with permission.

**Rocket_ebooks**  
Information about the now-obsolete Rocket ebook format and DRM, along with source for a tool to remove the DRM.




Windows and Python
------------------
We **strongly** recommend ActiveState's Active Python 2.7 Community Edition for Windows (x86) 32 bits. This can be downloaded for free from:

http://www.activestate.com/activepython/downloads

We do **NOT** recommend the version of Python from python.org.

The version from python.org is not as complete as most normal Python installations on Linux and even Mac OS X. It is missing various Windows specific libraries, does not install the default Tk Widget kit (for graphical user interfaces) unless you select it as an option in the installer, and does not properly update the system PATH environment variable. Therefore using the default python.org build on Windows is simply an exercise in frustration for most Windows users.

In addition, Windows Users need one of PyCrypto OR OpenSSL. Because of potential conflicts with other software, we recommend using PyCrypto.

### For PyCrypto:  
There are many places to get PyCrypto installers for Windows. One such place is:  
http://www.voidspace.org.uk/python/modules.shtml  
Please get the latest PyCrypto meant for Windows 32 bit that matches the version of Python you installed (2.7)

### For OpenSSL:
**Win32 OpenSSL v0.9.8o (8Mb)**  
http://www.slproweb.com/download/Win32OpenSSL-0_9_8o.exe  
(if you get an error message about missing Visual C++ redistributables... cancel the install and install the below support program from Microsoft, THEN install OpenSSL)  

**Visual C++ 2008 Redistributables (1.7Mb)**  
http://www.microsoft.com/downloads/details.aspx?familyid=9B2DA534-3E03-4391-8A4D-074B9F2BC1BF

Once Windows users have installed Python 2.X for 32 bits, and the matching OpenSSL OR PyCrypto pieces, they too are ready to run a DeDRM application.



Apple's iBooks FairPlay DRM
---------------------------

The only tool that removes Apple's iBooks Fairplay DRM is Requiem by Brahms version 3.3.6 and works with iTunes 10.5. Requiem 4.0 and later do not remove DRM from ebooks.

Requiem has a Tor website: http://tag3ulp55xczs3pn.onion. To reach the site using Tor, you will need to install Tor (http://www.torproject.org). If you're willing to sacrifice your anonymity, you can use the regular web with tor2web. Just go to http://tag3ulp55xczs3pn.tor2web.com.

Alternatively, you can download it from these download links:

Requiem 3.3.6 for Windows: http://www.datafilehost.com/download-f7916922.html  
MD5: 10ab191f2d86c692d57f6a07b4622cf8

Requiem 3.3.6 for Mac OS X: http://www.datafilehost.com/download-47fce8b7.html  
MD5: 6d4167d47e6982ddbb8528212198b520

Requiem 3.3.6 source code: http://www.datafilehost.com/download-172920e9.html  
MD5: 1636862796d573c693d56bcc526b60bd

If you have any problems with Requiem, I suggest you contact Brahms directly through their Tor website.

No support for requiem is provided at Apprentice Alf's blog.

